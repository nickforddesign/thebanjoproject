!function(t,e){var r=t.History,$=t.jQuery,a=t.document;return r.enabled?void $(function(){var e="main,article:first,.article:first,.post:first",i=$(e).filter(":first"),n=i.get(0),l=$("#menu,#nav,nav:first,.nav:first").filter(":first"),c="active selected current youarehere",o=".active,.selected,.current,.youarehere",s="> li,> ul > li",f="statechangecomplete",d=$(t),u=$(a.body),h=r.getRootUrl(),g={duration:800,easing:"swing"};0===i.length&&(i=u),$.expr[":"].internal=function(t,e,r,a){var i=$(t),n=i.attr("href")||"",l;return l=n.substring(0,h.length)===h||-1===n.indexOf(":")};var p=function(t){var e=String(t).replace(/<\!DOCTYPE[^>]*>/i,"").replace(/<(html|head|body|title|meta|script)([\s\>])/gi,'<div class="document-$1"$2').replace(/<\/(html|head|body|title|meta|script)\>/gi,"</div>");return $.trim(e)};$.fn.ajaxify=function(){var t=$(this);return t.find("a:internal:not(.no-ajaxy)").click(function(t){var e=$(this),a=e.attr("href"),i=e.attr("title")||null;return 2==t.which||t.metaKey?!0:(r.pushState(null,i,a),t.preventDefault(),!1)}),t},u.ajaxify(),d.bind("statechange",function(){var v=r.getState(),m=v.url,y=m.replace(h,"");r.getState().data.hasOwnProperty("slug")||(u.addClass("loading"),i.animate({opacity:0},800),$.ajax({url:m,success:function(r,h,v){var x=$(p(r)),j=x.find(".document-body:first"),b=j.find(e).filter(":first"),w,C,S;if(S=b.find(".document-script"),S.length&&S.detach(),C=b.html()||x.html(),!C)return a.location.href=m,!1;w=l.find(s),w.filter(o).removeClass(c),w=w.has('a[href^="'+y+'"],a[href^="/'+y+'"],a[href^="'+m+'"]'),1===w.length&&w.addClass(c),i.stop(!0,!0),i.html(C).ajaxify().css("opacity",100).show(),a.title=x.find(".document-title:first").text();try{a.getElementsByTagName("title")[0].innerHTML=a.title.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(T){}S.each(function(){var t=$(this),e=t.text(),r=a.createElement("script");t.attr("src")&&(t[0].async||(r.async=!1),r.src=t.attr("src")),r.appendChild(a.createTextNode(e)),n.appendChild(r)}),u.ScrollTo&&u.ScrollTo(g),u.removeClass("loading"),d.trigger(f),"undefined"!=typeof t._gaq&&t._gaq.push(["_trackPageview",y]),"undefined"!=typeof t.reinvigorate&&"undefined"!=typeof t.reinvigorate.ajax_track&&reinvigorate.ajax_track(m)},error:function(t,e,r){return a.location.href=m,!1}}))})}):!1}(window);