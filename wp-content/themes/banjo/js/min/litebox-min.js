var liteBox={};!function($){void 0==typeof jQuery&&console in window&&console.warn("liteBox.js requires jQuery"),$.extend(liteBox,{init:function(){var e=this.createElement("lb","div"),t=this.createElement("lb-cover","div"),i=this.createElement("lb-container","div");preloader=this.createElement("preloader","div"),navigation=this.createElement("lb-navigation"),navigation.innerHTML='<a class="arrow-left disabled no-ajaxy" href="#"><svg viewBox="0 0 56 56"><polygon fill="#FFFFFF" points="38.7,51.6 15.7,28.6 38.7,5.6 40.1,7 18.5,28.6 40.2,50.2"/></svg></a> <a class="arrow-right no-ajaxy" href="#"><svg viewBox="0 0 56 56"><polygon fill="#FFFFFF" points="17.1,51.6 40.2,28.6 17.1,5.6 15.7,7 37.3,28.6 15.7,50.2"/></svg></a>',e.appendChild(preloader),e.appendChild(t),e.appendChild(i),e.appendChild(navigation),document.body.appendChild(e),isTransitioning=!1,this.initEventHandlers()},createElement:function(e,t){t||(t="div");var i=document.createElement(t);return i.className=e,i},constructModal:function(e,t,i,a){if("string"==typeof t)if("video"==e){var n="",l="";$(".lb-container").addClass("video"),t.indexOf("vimeo")>-1?t.indexOf("player.vimeo.com/video/")>-1?l=t:(n=t.split(".com/")[1],l="https://player.vimeo.com/video/"+n+"?autoplay=1&color=ea9e39&title=0&byline=0&portrait=0"):t.indexOf("youtu")>-1&&(t.indexOf("youtu.be")>-1?n=t.split("youtu.be/")[1].split("?")[0]:t.indexOf("youtube.com/watch?v=")>-1&&(n=t.split("youtube.com/watch?v=")[1].split("?")[0]),l="https://www.youtube.com/embed/"+n);var o=liteBox.createElement("lb-video","div"),s=liteBox.createElement("lb-iframe","iframe"),r=liteBox.createElement("lb-title","h3");r.innerHTML=i,s.src=l,o.appendChild(s),$(".lb-container").append($(o)).append($(r)),$(".lb-iframe").load(function(e){$(".lb").addClass("active").removeClass("loading"),liteBox.initVideoEvents()})}else if("images"==e){var d=liteBox.createElement("lb-gallery-container"),c=liteBox.createElement("lb-gallery","ul"),v=t.split(","),p=0;v.forEach(function(e){var t=liteBox.createElement("lb-image-li","li"),i=liteBox.createElement("lb-image","img");0==p?(t.className+=" active",p++):$(".lb").addClass("gallery"),i.src=e,i.draggable=!1,t.appendChild(i),c.appendChild(t)}),d.appendChild(c),$(".lb-container").append($(d)),$(".lb-container img").load(function(){$(".lb").addClass("active").removeClass("loading"),liteBox.updateButtons()})}else"html"==e?$.ajax(t+"?json=1").done(function(e){var t=e.post.content,a=liteBox.createElement("lb-html","div"),n=liteBox.createElement("lb-title","h3"),l=liteBox.createElement("lb-fade","div");n.innerHTML=i,a.appendChild(n),a.innerHTML+=t,a.appendChild(l),$(".lb-container").html(a).parent().addClass("active").removeClass("loading")}):console in window&&console.error('First argument should be "video", "images", or "audio"');else console in window&&console.error("Expected value is a url in string format")},updateButtons:function(){var e=$(".lb-image-li.active"),t=e.prev(),i=e.next();$(".lb-navigation a").removeClass("disabled"),t.length?i.length||$(".arrow-right").addClass("disabled"):$(".arrow-left").addClass("disabled")},nextSlide:function(){if(console.log("nextSlide()"),!isTransitioning){var e=$(".lb-image-li.active");e.is(":last-child")||(isTransitioning=!0,e.animate({"margin-left":"-40px",opacity:"0"},{duration:300,complete:function(){e.css({"margin-left":"0",opacity:"1"}).removeClass("active").next().addClass("active"),isTransitioning=!1,liteBox.updateButtons()}}))}},prevSlide:function(){if(console.log("prevSlide()"),!isTransitioning){var e=$(".lb-image-li.active");e.is(":first-child")||(isTransitioning=!0,e.animate({"margin-right":"-40px",opacity:"0"},{duration:300,complete:function(){e.css({"margin-right":"0",opacity:"1"}).removeClass("active").prev().addClass("active"),isTransitioning=!1,liteBox.updateButtons()}}))}},closeModal:function(){$(".lb-container").html(""),$(".lb-container").removeClass("video"),$(".lb").removeClass("active").removeClass("gallery"),isTransitioning=!1},initEventHandlers:function(){function e(e){e=e||window.event,$(".lb-gallery").is(":visible")&&("37"==e.keyCode?(e.preventDefault(),liteBox.prevSlide()):"39"==e.keyCode?(e.preventDefault(),liteBox.nextSlide()):"38"==e.keyCode?e.preventDefault():"40"==e.keyCode&&e.preventDefault())}$("html").on("click","a[data-litebox]",function(e){e.preventDefault(),$(".lb").addClass("loading")}).on("click",'a[data-litebox="video"]',function(e){var t=null;$(this)[0].hasAttribute("data-description")&&(t=$(this).attr("data-description")),liteBox.constructModal("video",$(this)[0].href,$(this).attr("data-title"),t)}).on("click",'a[data-litebox="images"]',function(e){liteBox.constructModal("images",$(this).attr("data-images"))}).on("click",'a[data-litebox="html"]',function(e){liteBox.constructModal("html",$(this).attr("data-html"),$(this).attr("data-title"))}).on("click",".lb-navigation a",function(e){e.preventDefault(),$(this).hasClass("arrow-left")?liteBox.prevSlide():$(this).hasClass("arrow-right")&&liteBox.nextSlide()});var t=document.getElementsByTagName("body")[0],i=new Hammer(t,{touchAction:"auto"});i.on("swipeleft swiperight tap",function(e){("lb-cover"===e.target.className||"lb-image"===e.target.className)&&(isTransitioning||(1==jQuery(".lb-image").length&&liteBox.closeModal(),"lb-cover"===e.target.className&&"tap"===e.type?liteBox.closeModal():jQuery(".lb-image").length>1&&("swipeleft"===e.type||"tap"===e.type?liteBox.nextSlide():"swiperight"===e.type&&liteBox.prevSlide())))}),document.onkeydown=e},initVideoEvents:function(){jQuery(function($){function e(){n("addEventListener","pause"),n("addEventListener","finish"),n("addEventListener","playProgress")}function t(){console.log("paused")}function i(){$(".music-player").hasClass("playing")&&playa.action("pause"),console.log("playing")}function a(){liteBox.closeModal()}function n(e,t){var i={method:e};t&&(i.value=t);var a=JSON.stringify(i);jQuery(".lb-iframe")[0].contentWindow.postMessage(i,s)}function l(n){if(!/^https?:\/\/player.vimeo.com/.test(n.origin))return!1;"*"===s&&(s=n.origin);var l=JSON.parse(n.data);switch(l.event){case"ready":e();break;case"pause":t();break;case"playProgress":i();break;case"finish":a()}}console.log("initVideoEvents");var o=$(".lb-iframe"),s="*";window.addEventListener?window.addEventListener("message",l,!1):window.attachEvent("onmessage",l,!1)})}}),$(document).ready(function(){liteBox.init()})}(jQuery);
//# sourceMappingURL=./litebox-min.js.map